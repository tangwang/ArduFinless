# 04｜参数调试实战手册（从地面到短航）

## 0. 调参原则（请先读）

- 每次只改 **1~2 个参数**。
- 每次修改后做同样动作对比结果。
- 做日志：时间、参数、现象、结论。
- 不上桨先全链路验证；首次上桨必须有安全员。

## 1. 串口命令速查

项目支持：
- `help`：查看命令说明
- `params`：查看所有参数及范围
- `get <param>`：查看单个参数
- `set <param> <value>`：设置并保存
- `report on/off`：开关实时调试输出

## 2. 推荐调参顺序

## 步骤 A：机械/限位参数

优先调整：
- `right_lim_inf`, `right_lim_sup`
- `left_lim_inf`, `left_lim_sup`

目标：
- 中位时舵面在预期中立位置。
- 最大指令时不顶死、不干涉、不抖动。

## 步骤 B：传感器零偏

- `encoder_calibration`：让静态机体时 Beta 接近预期零位。
- `gyro_calibration`：静止时 Yaw Rate 接近 0。

如果零偏没对齐，后续增益调得再好都容易“带偏飞”。

## 步骤 C：控制增益

- `Cn_beta`：先小后大，观察纠偏能力与稳定性。
- `Cn_damper`：在 `Cn_beta` 基础上补阻尼，抑制摆振。

### 入门调法（经验型）

1. 固定 `Cn_damper` 为保守值，逐步提升 `Cn_beta`，直到出现轻微过冲前。
2. 稍回退 `Cn_beta`，再逐步增加 `Cn_damper`，观察动态平顺性。
3. 若响应迟滞明显，适当回调 `Cn_damper`。

## 3. 观察指标（地面阶段）

- RC 指令变化时，左右舵是否同向/反向符合预期。
- 快速扰动机体时，输出是否出现“合理阻尼反应”。
- 串口 `report` 数据中，Beta 与 Yaw_Rate 是否噪声过大。

## 4. 首次短航建议

- 低风险天气（小风、开阔场地）。
- 保守重心位置和舵量。
- 航线短、动作简单，以“稳定性验证”为目标，不追求机动。
- 每一趟飞行后只做小改动并记录。

## 5. 典型现象与调参方向

- **左右摆振明显**：优先检查 `Cn_damper` 是否偏小，或传感器噪声过大。
- **纠偏慢、侧滑残留大**：适当提升 `Cn_beta`。
- **输出常偏一侧**：检查零偏参数和机械中立位。
- **动作发抖**：检查滤波、供电、连杆间隙、PWM 信号质量。

## 6. 你需要建立的工程习惯

飞控调参不是“玄学手感”，而是：
- 明确假设
- 做小步实验
- 记录证据
- 形成结论

这套习惯比“某个具体参数值”更重要。
